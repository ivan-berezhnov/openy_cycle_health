!function(e){function t(t){for(var n,o,r=t[0],l=t[1],c=t[2],d=0,m=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&m.push(i[o][0]),i[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(u&&u(t);m.length;)m.shift()();return a.push.apply(a,c||[]),s()}function s(){for(var e,t=0;t<a.length;t++){for(var s=a[t],n=!0,r=1;r<s.length;r++){var l=s[r];0!==i[l]&&(n=!1)}n&&(a.splice(t--,1),e=o(o.s=s[0]))}return e}var n={},i={1:0},a=[];function o(t){if(n[t])return n[t].exports;var s=n[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=n,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(s,n,function(t){return e[t]}.bind(null,n));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var r=window.webpackJsonp=window.webpackJsonp||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var u=l;a.push([362,0]),s()}({29:function(e,t){e.exports=Vue},362:function(t,s,n){"use strict";n.r(s);var i=n(29),a=n.n(i),o=function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("main-filter",{attrs:{debug:this.debug,options:this.excercisesOptions,game_nid:this.game_nid,completion_url:this.completion_url},on:{"data-update":this.sendData}}),this._v(" "),t("notifications",{attrs:{group:"twelve_app"}})],1)};o._withStripped=!0;var r=function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{staticClass:"spinner",attrs:{viewBox:"0 0 50 50","data-size":"small","data-flow":"inline"}},[t("circle",{staticClass:"path",attrs:{cx:"25",cy:"25",r:"20",fill:"none","stroke-width":"5",stroke:"#93bfec"}})])};r._withStripped=!0;var l=n(10),c=Object(l.a)({},r,[],!1,null,null,null);c.options.__file="bursts/components/Spinner.vue";var u=c.exports,d=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("name-form",{on:{"show-modal":function(t){e.nameModalVisible=!0},"hide-modal":function(t){e.nameModalVisible=!1}}}),e._v(" "),e._l(e.options,(function(t){return e.currentExcercise===t.id?s("div",{staticClass:"modal fade show excercise-container"},[s("div",{staticClass:"modal-backdrop fade in"}),e._v(" "),s("div",{staticClass:"modal-dialog"},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h4",{staticClass:"modal-title"},[e._v("BURST DETAILS")]),e._v(" "),s("button",{staticClass:"close notranslate",attrs:{type:"button","aria-label":"Close"},on:{click:e.closeExerciseModal}},[s("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])]),e._v(" "),s("div",{staticClass:"modal-body"},[s("div",{staticClass:"description",domProps:{innerHTML:e._s(t.description)}}),e._v(" "),t.gif_path?s("div",{staticClass:"animation"},[s("img",{attrs:{src:t.gif_path}})]):e._e()]),e._v(" "),s("div",{staticClass:"modal-footer"},[e.timerIsRunning?s("div",{staticClass:"countdown notranslate"},[e.timerIsRunning?s("countdown",{ref:"countdown",refInFor:!0,attrs:{time:1e3*t.timer,"emit-events":!0},on:{start:function(s){return e.triggerTimerStart(t.id)},end:function(s){return e.triggerTimerEnd(t.id)}},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatNumber")(t.minutes))+":"+e._s(e._f("formatNumber")(t.seconds))+"\n              ")]}}],null,!0)}):e._e()],1):e._e(),e._v(" "),e.timerIsRunning?s("button",{staticClass:"btn btn-blue notranslate",attrs:{type:"button"},on:{click:e.toggleTimerPause}},[e.timerIsPaused?[e._v("CONTINUE")]:[e._v("PAUSE")]],2):e._e(),e._v(" "),e.checked.includes(t.id)?s("button",{staticClass:"btn btn-gold notranslate",attrs:{type:"button"},on:{click:e.closeExerciseModal}},[s("img",{attrs:{src:"/themes/custom/twelve_carnation/dist/img/task-gold.png"}}),e._v("\n            COMPLETE\n          ")]):e._e(),e._v(" "),e.timerIsRunning||e.checked.includes(t.id)?e._e():s("button",{staticClass:"btn btn-default notranslate",attrs:{type:"button"},on:{click:function(t){e.timerIsRunning=!0}}},[e._v("\n            READY … SET … GO!\n          ")])])])])]):e._e()})),e._v(" "),s("div",{staticClass:"message"},[e._v("Click an activity below. Keep going until you've clicked them all!")]),e._v(" "),s("div",{staticClass:"container",class:{"visually-disabled":e.nameModalVisible||e.exerciseModalVisible}},e._l(e.options,(function(t){return s("div",{staticClass:"today-progress-item",class:{checked:e.checked.includes(t.id)},on:{click:function(s){return e.openExerciseModal(t.id)}}},[s("div",{staticClass:"checkbox",class:{checked:e.checked.includes(t.id)}}),e._v(" "),s("div",{staticClass:"title"},[e._v(e._s(t.label))]),e._v(" "),s("div",{staticClass:"description",domProps:{innerHTML:e._s(t.description)}})])})),0)],2)};d._withStripped=!0;var m=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"introduce-form"},[s("div",{staticClass:"user-name-container"},[s("span",{staticClass:"username"},[e._v("\n      Hello, "),e.userIntroduced?[e._v(e._s(e.username)+"!")]:[e._v("...")]],2),e._v(" "),e.isLoggedIn?e._e():s("a",{staticClass:"change-button",on:{click:e.showModal}},[e._v("Edit Name")])]),e._v(" "),e.userIntroduced?e._e():s("div",{staticClass:"modal fade show d-block user-login-container"},[s("div",{staticClass:"modal-backdrop fade in"}),e._v(" "),s("div",{staticClass:"modal-dialog"},[s("div",{staticClass:"modal-content"},[e._m(0),e._v(" "),s("div",{staticClass:"modal-body"},[s("p",[e._v("What name do you go by, challenger?")]),e._v(" "),s("div",{staticClass:"label"},[e._v("Name")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"username",attrs:{type:"text",name:"username"},domProps:{value:e.username},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.setLogin(t)},input:function(t){t.target.composing||(e.username=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:e.setLogin}},[e._v("Enter")]),e._v(" "),s("button",{staticClass:"btn btn-white",attrs:{type:"button"},on:{click:e.setDefaultName}},[e._v("No thanks")])])])])])])};m._withStripped=!0;var p={data(){let e=this.loadNameFromCache();return""!==drupalSettings.username&&(e=drupalSettings.username,localStorage.twelveUserName=e),{isLoggedIn:drupalSettings.user.uid>0,userIntroduced:drupalSettings.user.uid>0||this.isName(e),username:e}},created(){},methods:{loadNameFromCache:function(){let e=localStorage.twelveUserName;return this.isName(e)||this.$emit("show-modal"),e},isName:function(e){return"string"==typeof e&&e.length>0},showModal:function(){this.userIntroduced=!1,this.$emit("show-modal")},setDefaultName:function(){this.username="Challenger",this.setLogin()},setLogin:function(){this.username?(localStorage.twelveUserName=this.username,this.userIntroduced=!0,this.$emit("hide-modal"),this.$notify({group:"twelve_app",title:"You have introduced yourself",text:"Lets start training!"})):e.preventDefault()}}},h=Object(l.a)(p,m,[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"modal-header"},[t("h4",{staticClass:"modal-title"},[this._v("CHALLENGER NAME")])])}],!1,null,null,null);h.options.__file="bursts/components/NameForm.vue";var f=h.exports,v=n(69),g=n.n(v);Vue.filter("formatNumber",(function(e){return e<10?"0"+e:e}));var _={props:["debug","options","game_nid","completion_url"],components:{NameForm:f,Countdown:g.a},data:function(){return{checked:[],currentExcercise:0,timerIsRunning:!1,timerIsPaused:!1,exerciseModalVisible:!1,nameModalVisible:!1}},created:function(){let e=this.loadTodayProgressFromLocalStorage();for(let t=0;t<e.length;t++)this.checked.push(e[t])},computed:{},methods:{triggerTimerEnd:function(e){-1===this.checked.indexOf(e)?(this.checked.push(e),this.$emit("data-update",this.checked),this.beep(),this.timerIsRunning=!1,this.saveTodayProgressToLocalStorage(),this.$notify({group:"twelve_app",title:"Hooray, you have finished your exercise!",text:"Now, lets have some rest."})):this.checked.splice(this.checked.indexOf(e),1)},triggerTimerStart:function(e){},toggleTimerPause:function(){this.timerIsPaused?(this.$refs.countdown[0].start(),this.timerIsPaused=!1):(this.$refs.countdown[0].abort(),this.timerIsPaused=!0)},openExerciseModal:function(e){this.checked.includes(e)||(this.currentExcercise=e,this.exerciseModalVisible=!0)},closeExerciseModal:function(){this.currentExcercise=0,this.timerIsRunning=!1,this.timerIsPaused=!1,this.exerciseModalVisible=!1,this.fullyCompletedTodayExercises()&&this.$props.completion_url.length>0&&(window.location=window.location.origin+this.$props.completion_url)},fullyCompletedTodayExercises:function(){return this.checked.length>=Object.keys(this.$props.options).length},beep:function(){new Audio("/modules/custom/twelve_app/bursts/disco_alarm.wav").play()},saveTodayProgressToLocalStorage:function(){let e="progress"+this.$props.game_nid,t=JSON.stringify(Array.from(this.checked.values()));localStorage.setItem(e,t)},loadTodayProgressFromLocalStorage:function(){let e="progress"+this.$props.game_nid,t=localStorage.getItem(e);return t=null===t?[]:JSON.parse(t),t}},watch:{checked:function(e){}},mounted:function(){}},b=Object(l.a)(_,d,[],!1,null,null,null);b.options.__file="bursts/components/Filter.vue";var y=b.exports;const w=n(99);var C={props:["excercises","game_nid","completion_url","debug"],data:()=>({checkedExcercises:[],userData:{name:""},isStepNextDisabled:!0}),components:{Spinner:u,MainFilter:y},mounted(){},methods:{sendData:function(e){let t=window.location.origin+"/node",s="post",n={type:"12_bursts_result",title:{value:localStorage.twelveUserName},field_when:{value:this.$props.game_nid},field_finished_items:e},i=this.getLocalStorageKey(),a=localStorage.getItem(i);a&&(t+="/"+a,s="patch"),""!==drupalSettings.username?w({url:"/session/token"}).then(e=>{let i=e.data;w({method:s,url:t,data:n,headers:{"X-CSRF-Token":i}}).then(function(e){let t=this.getLocalStorageKey(),s=e.data.nid[0].value;localStorage.setItem(t,s)}.bind(this)).catch((function(e){}))}).catch((function(e){})):(w({url:"/session/token"}).then(e=>{e.data}).catch((function(e){})),w({method:s,url:t,data:n,headers:{},auth:{username:"12bursts_consumer",password:"e+bMS3E)}qv(rAMa"}}).then(function(e){let t=this.getLocalStorageKey(),s=e.data.nid[0].value;localStorage.setItem(t,s)}.bind(this)).catch((function(e){})))},getLocalStorageKey:function(){return"result_node_id_for_"+this.$props.game_nid+"_"+drupalSettings.user.uid}},computed:{excercisesOptions:function(){var e={};for(var t in this.excercises){var s=this.excercises[t];e[t]={label:s.label,description:s.description,timer:s.timer,gif_path:s.gif,id:s.id}}return e}}},k=Object(l.a)(C,o,[],!1,null,null,null);k.options.__file="bursts/components/TodayProgress.vue";var S=k.exports,x=n(70),E=n.n(x);n(105);a.a.use(E.a),new a.a({delimiters:["[{","}]"],components:{TodayProgress:S}}).$mount("#twelve_day_progress_app"),a.a.config.devtools=!0}});