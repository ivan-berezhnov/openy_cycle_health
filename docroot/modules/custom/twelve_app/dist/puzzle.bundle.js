!function(e){function t(t){for(var s,r,a=t[0],l=t[1],c=t[2],u=0,p=[];u<a.length;u++)r=a[u],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&p.push(n[r][0]),n[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);for(d&&d(t);p.length;)p.shift()();return o.push.apply(o,c||[]),i()}function i(){for(var e,t=0;t<o.length;t++){for(var i=o[t],s=!0,a=1;a<i.length;a++){var l=i[a];0!==n[l]&&(s=!1)}s&&(o.splice(t--,1),e=r(r.s=i[0]))}return e}var s={},n={2:0},o=[];function r(t){if(s[t])return s[t].exports;var i=s[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=s,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(i,s,function(t){return e[t]}.bind(null,s));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var a=window.webpackJsonp=window.webpackJsonp||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var d=l;o.push([363,0]),i()}({29:function(e,t){e.exports=Vue},363:function(e,t,i){"use strict";i.r(t);var s=i(29),n=i.n(s),o=function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("main-filter",{attrs:{options:this.excercisesOptions,game_nid:this.game_nid,progress_nid:this.progress_nid,finished_items:this.finished_items},on:{"data-update":this.sendData}}),this._v(" "),t("notifications",{attrs:{group:"twelve_app"}})],1)};o._withStripped=!0;var r=function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{staticClass:"spinner",attrs:{viewBox:"0 0 50 50","data-size":"small","data-flow":"inline"}},[t("circle",{staticClass:"path",attrs:{cx:"25",cy:"25",r:"20",fill:"none","stroke-width":"5",stroke:"#93bfec"}})])};r._withStripped=!0;var a=i(10),l=Object(a.a)({},r,[],!1,null,null,null);l.options.__file="puzzle/components/Spinner.vue";var c=l.exports,d=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("name-form",{on:{"show-modal":function(t){e.nameModalVisible=!0},"hide-modal":function(t){e.nameModalVisible=!1}}}),e._v(" "),e._l(e.options,(function(t){return e.currentExcercise===t.id?i("div",{staticClass:"modal fade show excercise-container"},[i("div",{staticClass:"modal-backdrop fade in"}),e._v(" "),i("div",{staticClass:"modal-dialog"},[i("div",{staticClass:"modal-content"},[i("div",{staticClass:"modal-header"},[i("h4",{staticClass:"modal-title"},[e._v(e._s(t.label))]),e._v(" "),i("button",{staticClass:"close notranslate",attrs:{type:"button","aria-label":"Close"},on:{click:e.closeExerciseModal}},[i("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])]),e._v(" "),i("div",{staticClass:"modal-body"},[i("div",{staticClass:"description",domProps:{innerHTML:e._s(t.description)}}),e._v(" "),t.gif_path?i("div",{staticClass:"animation"},[i("img",{attrs:{src:t.gif_path}})]):e._e()]),e._v(" "),i("div",{staticClass:"modal-footer"},[e.timerIsRunning?i("div",{staticClass:"countdown notranslate"},[e.timerIsRunning?i("countdown",{ref:"countdown",refInFor:!0,attrs:{time:1e3*t.timer,"emit-events":!0},on:{start:function(i){return e.triggerTimerStart(t.id)},end:function(i){return e.triggerTimerEnd(t.id)}},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatNumber")(t.minutes))+":"+e._s(e._f("formatNumber")(t.seconds))+"\n              ")]}}],null,!0)}):e._e()],1):e._e(),e._v(" "),e.timerIsRunning?i("button",{staticClass:"btn btn-blue notranslate",attrs:{type:"button"},on:{click:e.toggleTimerPause}},[e.timerIsPaused?[e._v("CONTINUE")]:[e._v("PAUSE")]],2):e._e(),e._v(" "),e.checked.includes(t.id)?i("button",{staticClass:"btn btn-gold notranslate",attrs:{type:"button"},on:{click:e.closeExerciseModal}},[i("img",{attrs:{src:"/themes/custom/twelve_carnation/dist/img/task-gold.png"}}),e._v("\n            COMPLETE\n          ")]):e._e(),e._v(" "),e.timerIsRunning||e.checked.includes(t.id)?e._e():i("button",{staticClass:"btn btn-default notranslate",attrs:{type:"button"},on:{click:function(t){e.timerIsRunning=!0}}},[e._v("\n            READY … SET … GO!\n          ")])])])])]):e._e()})),e._v(" "),i("div",{staticClass:"message"},[e._v("Click an activity below. Keep going until you've clicked them all!")]),e._v(" "),i("div",{staticClass:"container",class:{"visually-disabled":e.nameModalVisible||e.exerciseModalVisible}},e._l(e.options,(function(t){return i("div",{staticClass:"today-progress-item",class:{checked:e.checked.includes(t.id)},on:{click:function(i){return e.openExerciseModal(t.id)}}},[e.checked.includes(t.id)?i("div",{style:{backgroundImage:"url('"+t.puzzle_image_url+"')"}}):[e._v(e._s(t.index_number))]],2)})),0)],2)};d._withStripped=!0;var u=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"introduce-form"},[i("div",{staticClass:"user-name-container"},[i("span",{staticClass:"username"},[e._v("Hello, "),e.userIntroduced?[e._v(e._s(e.username)+"!")]:[e._v("...")]],2)]),e._v(" "),e.userIntroduced?e._e():i("div",{staticClass:"modal fade show d-block user-login-container"},[i("div",{staticClass:"modal-backdrop fade in"}),e._v(" "),i("div",{staticClass:"modal-dialog"},[i("div",{staticClass:"modal-content"},[e._m(0),e._v(" "),i("div",{staticClass:"modal-body"}),e._v(" "),i("div",{staticClass:"modal-footer"},[i("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:e.gotoLoginPage}},[e._v("Login")]),e._v(" "),i("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:e.gotoRegisterPage}},[e._v("Register")])])])])])])};u._withStripped=!0;var p={data(){let e=this.loadUserName();return{userIntroduced:drupalSettings.user.uid>0,username:e}},created(){},methods:{loadUserName:function(){let e=drupalSettings.username;return this.isName(e)||this.$emit("show-modal"),localStorage.twelveUserName=e,e},isName:function(e){return"string"==typeof e&&e.length>0},showModal:function(){this.userIntroduced=!1,this.$emit("show-modal")},gotoLoginPage:function(){window.location=window.location.origin+"/user/login?destination="+encodeURIComponent(window.location.pathname)},gotoRegisterPage:function(){window.location=window.location.origin+"/user/register?destination="+encodeURIComponent(window.location.pathname)}}},m=Object(a.a)(p,u,[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"modal-header"},[t("h4",{staticClass:"modal-title"},[this._v("Log in to start playing")])])}],!1,null,null,null);m.options.__file="puzzle/components/NameForm.vue";var h=m.exports,f=i(69),g=i.n(f);Vue.filter("formatNumber",(function(e){return e<10?"0"+e:e}));var _={props:["options","game_nid","progress_nid","finished_items"],components:{NameForm:h,Countdown:g.a},data:function(){return this.saveTodayProgressToLocalStorage(this.$props.finished_items),{checked:this.$props.finished_items,currentExcercise:0,timerIsRunning:!1,timerIsPaused:!1,exerciseModalVisible:!1,nameModalVisible:!1}},created:function(){if(0===this.checked.length){let e=this.loadTodayProgressFromLocalStorage();for(let t=0;t<e.length;t++)this.checked.push(e[t])}},computed:{},methods:{triggerTimerEnd:function(e){-1===this.checked.indexOf(e)?(this.checked.push(e),this.$emit("data-update",this.checked),this.beep(),this.timerIsRunning=!1,this.saveTodayProgressToLocalStorage(Array.from(this.checked.values())),this.$notify({group:"twelve_app",title:"Hooray, you have finished your excercise!",text:"Now, lets have some rest."})):this.checked.splice(this.checked.indexOf(e),1)},triggerTimerStart:function(e){},toggleTimerPause:function(){this.timerIsPaused?(this.$refs.countdown[0].start(),this.timerIsPaused=!1):(this.$refs.countdown[0].abort(),this.timerIsPaused=!0)},openExerciseModal:function(e){this.checked.includes(e)||(this.currentExcercise=e,this.exerciseModalVisible=!0)},closeExerciseModal:function(){this.currentExcercise=0,this.timerIsRunning=!1,this.timerIsPaused=!1,this.exerciseModalVisible=!1,this.fullyCompletedTodayExercises()&&(window.location=window.location.origin+"/user")},fullyCompletedTodayExercises:function(){return this.checked.length>=Object.keys(this.$props.options).length},beep:function(){new Audio("/modules/custom/twelve_app/puzzle/disco_alarm.wav").play()},saveTodayProgressToLocalStorage:function(e){let t="progress_exercises_"+this.$props.progress_nid,i=JSON.stringify(e);localStorage.setItem(t,i)},loadTodayProgressFromLocalStorage:function(){let e="progress_exercises_"+this.$props.progress_nid,t=localStorage.getItem(e);return t=null===t?[]:JSON.parse(t),t}},watch:{checked:function(e){}},mounted:function(){}},v=Object(a.a)(_,d,[],!1,null,null,null);v.options.__file="puzzle/components/Filter.vue";var b=v.exports;const w=i(99);var y={props:["excercises","game_nid","progress_nid","completion_url","finished_items"],data:()=>({checkedExcercises:[],userData:{name:""},isStepNextDisabled:!0}),created:function(){this.setProgressNid(this.$props.progress_nid)},components:{Spinner:c,MainFilter:b},mounted(){},methods:{sendData:function(e){let t=window.location.origin+"/node",i="post",s={type:"12_bursts_result",title:{value:localStorage.twelveUserName},field_when:{value:this.$props.game_nid},field_finished_items:e},n=this.getProgressNid();n>0&&(t+="/"+n,i="patch"),w({url:"/session/token"}).then(e=>{let n=e.data;w({method:i,url:t,data:s,headers:{"X-CSRF-Token":n}}).then(function(e){let t=e.data.nid[0].value;this.setProgressNid(t)}.bind(this)).catch((function(e){}))}).catch((function(e){}))},getLocalStorageKey:function(){return"progress_nid_for_"+this.$props.game_nid+"_"+drupalSettings.user.uid},getProgressNid:function(){let e=this.getLocalStorageKey();return localStorage.getItem(e)},setProgressNid:function(e){let t=this.getLocalStorageKey();localStorage.setItem(t,e)}},computed:{excercisesOptions:function(){var e={},t=1;for(var i in this.excercises){var s=this.excercises[i];e[i]={label:s.label,description:s.description,timer:s.timer,gif_path:s.gif,id:s.id,puzzle_image_url:s.puzzle_image_url,index_number:t++}}return e}}},x=Object(a.a)(y,o,[],!1,null,null,null);x.options.__file="puzzle/components/TodayProgress.vue";var C=x.exports,k=i(70),S=i.n(k);i(105);n.a.use(S.a),new n.a({delimiters:["[{","}]"],components:{TodayProgress:C}}).$mount("#twelve_puzzle_app"),n.a.config.devtools=!0}});